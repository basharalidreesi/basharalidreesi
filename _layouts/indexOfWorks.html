---
layout: main
---

			{%- assign index = site.data.indexOfWorks -%}
			<ol class="indexOfWorks">
				{%- for work in index.works -%}
				{%- if work.url -%}
				{%- assign url = work.url -%}
				{%- else -%}
				{%- assign url = work.title | slugify | prepend: index.path | append: "/" -%}
				{%- endif -%}
                                {%- unless work.isIndexed == false %}
				<li class="indexOfWorks__work">
					<article class="indexOfWorks__work__outerCard">
						<div class="indexOfWorks__work__innerCard">
							{%- for entry in work -%}
							{%- assign key = entry[0] -%}
							{%- assign value = entry[1] -%}
							{%- assign datum = index.indexingDatum[key] -%}
							{%- assign previous = forloop.index0 | minus: 1 -%}
							{%- assign next = forloop.index0 | plus: 1 -%}
								{%- for previousEntry in work offset: previous limit: 1 -%}
								{%- assign previousKey = previousEntry[0] -%}
								{%- assign previousValue = previousEntry[1] -%}
								{%- assign previousDatum = index.indexingDatum[previousKey] -%}
								{%- endfor -%}
									{%- for nextEntry in work offset: next limit: 1 -%}
									{%- assign nextKey = nextEntry[0] -%}
									{%- assign nextValue = nextEntry[1] -%}
									{%- assign nextDatum = index.indexingDatum[nextKey] -%}
									{%- endfor -%}
							{%- if value and datum -%}
							{%- assign classes = datum.classes | join: " " | prepend: 'class="' | append: '"' %}
							{%- if forloop.first or datum.outerHTML.open == previousDatum.outerHTML.open and datum.isCollapsible and previousDatum.isCollapsible %}
							<!-- collapsed tag: `{{ datum.outerHTML.open }}` -->{% else %}{{ datum.outerHTML.open | replace: "&classes", classes }}
							{%- endif %}
							<!-- previous key: {{ previousKey }} -->
							<!-- previous value: {{ previousValue }} -->
							<!-- previous opening tag: {{ previousDatum.outerHTML.open }} -->
							<!-- previous closing tag: {{ previousDatum.outerHTML.close }} -->
							{%- for node in value %}
								{{ datum.innerHTML.open }}{{ node }}{{ datum.innerHTML.close }}
							{%- endfor %}
							<!-- next key: {{ nextKey }} -->
							<!-- next value: {{ nextValue }} -->
							<!-- next opening tag: {{ nextDatum.outerHTML.open }} -->
							<!-- next closing tag: {{ nextDatum.outerHTML.close }} -->
							{%- if forloop.last or datum.outerHTML.close == previousDatum.outerHTML.close and datum.isCollapsible and previousDatum.isCollapsible %}
							<!-- collapsed tag: `{{ datum.outerHTML.close }}` -->{% else %}{{ datum.outerHTML.close }}
							{%- endif %}
							{%- endif -%}
							{%- endfor %}
						</div>
					</article>
				</li>
                                {%- endunless -%}
				{%- endfor %}
			</ol>
