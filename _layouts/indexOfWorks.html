---
layout: main
---

			{%- assign index = site.data.indexOfWorks -%}
                        {%- assign indent = "	" %}
			<ol class="indexOfWorks">
				{%- for work in index.works -%}
				{%- if work.url -%}
				{%- assign url = work.url -%}
				{%- else -%}
				{%- assign url = work.title | slugify | prepend: index.path | append: "/" -%}
				{%- endif -%}
                                {%- unless work.isIndexed == false %}
				<li class="indexOfWorks__work" {%- if work.hasFullHeightFigure %} style="background-image: url('{{ work.figure }}');" {%- endif %}>
					<dl>
						{%- for entry in work -%}
						{%- assign key = entry[0] -%}
							{%- if key == "figure" and work.hasFullHeightFigure -%}
							{%- continue -%}
							{%- endif -%}
						{%- assign value = entry[1] -%}
						{%- assign datum = index.indexingDatum[key] -%}
						{%- if value and datum -%}
						{%- assign classes = datum.classes | join: " " | prepend: 'class="' | append: '"' -%}
						{%- for node in value %}
						{% if key == "gap" and value %}{{ datum.outerHTML.open | replace: "&classes", classes | remove: ">" | append: ' style="padding-top: calc(100% * ' | append: value | append: ')">' }}{% else %}{{ datum.outerHTML.open | replace: "&classes", classes }}{% endif %}
							{%- if datum.isAnchored %}
							<a href="{{ url }}">
							{%- endif %}
							{% if datum.isAnchored %}{{ indent }}{% endif %}{{ datum.innerHTML.open }}{% if datum.doesEcho %}{{ node }}{% endif %}{{ datum.innerHTML.close }}
							{%- if datum.isAnchored %}
							</a>
							{%- endif %}
						{{ datum.outerHTML.close }}
						{%- endfor -%}
						{%- else %}
						<!-- undefined entry `{{ entry }}` in work `{{ work }}` -->
						{%- endif -%}
						{%- endfor %}
					</dl>
				</li>
                                {%- endunless -%}
				{%- endfor %}
			</ol>
